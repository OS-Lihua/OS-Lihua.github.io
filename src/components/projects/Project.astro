---
const { title, url, image, languages, description, size = "xs" } = Astro.props;

import Capsule from "../ui/Capsule.astro";

// 内容分析
const descriptionPreview = description.length > 120 
  ? description.slice(0, 120) + '...' 
  : description;

const tagsToShow = languages.slice(0, 4); // 限制显示的标签数量
const hasMoreTags = languages.length > 4;
---

<a
  href={url}
  class="w-full h-full hover:scale-105 transition-all duration-300 ease-in-out block"
>
  <article class="project-card project-card-enhanced group">
    <div class="project-image-container">
      <img 
        class="project-image group-hover:scale-110" 
        src={image.url} 
        alt={image.alt}
        loading="lazy"
      />
    </div>
    
    <div class="project-card-body">
      <h3 class="text-3xl font-bold text-blacktext dark:text-mint-50 mb-3">
        {title}
      </h3>
      
      <div class="project-tags">
        {tagsToShow.map(tag => (
          <Capsule size={size} linkEnabled={false} lang={tag} />
        ))}
        {hasMoreTags && (
          <span class="text-sm text-gray-500 dark:text-gray-400">+{languages.length - 4}</span>
        )}
      </div>
      
      <div class="project-content">
        <p class="project-description text-lg max-xl:text-base leading-6 font-medium text-blacktext dark:text-gray-200">
          {descriptionPreview}
        </p>
        
        <div class="flex items-center justify-end mt-auto pt-4">
          <span class="text-mint-500 dark:text-mint-300 font-medium hover:text-mint-600 dark:hover:text-mint-200 transition-colors">
            查看详情 →
          </span>
        </div>
      </div>
    </div>
  </article>
</a>
